# コンフリクト解決ガイド

## 🤔 コンフリクトって何？

コンフリクト（競合）は、複数の人が同じファイルの同じ部分を異なる方法で編集したときに発生します。GitHubがどちらの変更を採用すべきか判断できない状態です。

## 🎯 コンフリクトが起きる場面

### 例1: 同じ行の編集
```
Aさん: README.mdの3行目を「プロジェクトA」に変更
Bさん: README.mdの3行目を「プロジェクトB」に変更
→ コンフリクト発生！
```

### 例2: 片方が削除、片方が編集
```
Aさん: config.jsの10行目を削除
Bさん: config.jsの10行目を編集
→ コンフリクト発生！
```

## 🔍 コンフリクトの見つけ方

### GitHubでの表示
プルリクエストを作成すると、コンフリクトがある場合は以下のように表示されます：

```
⚠️ This branch has conflicts that must be resolved
```

### コンフリクトマーカーの見方
```
<<<<<<< HEAD
ここは現在のブランチ（通常main）の内容
=======
ここはマージしようとしているブランチの内容
>>>>>>> feature/new-feature
```

## 🛠️ 解決方法

### 方法1: GitHub Web UIで解決（推奨）

1. **「Resolve conflicts」ボタンをクリック**
   - PRページに表示される緑色のボタン

2. **エディタが開く**
   - コンフリクトがある箇所がハイライトされる

3. **編集する**
   ```
   削除前:
   <<<<<<< HEAD
   # 私のプロジェクト
   =======
   # Our Project
   >>>>>>> feature/english-title
   
   削除後（例1: 片方を選ぶ）:
   # Our Project
   
   削除後（例2: 両方を活かす）:
   # 私のプロジェクト / Our Project
   ```

4. **「Mark as resolved」をクリック**

5. **「Commit merge」をクリック**

### 方法2: VS Code（ブラウザ版）で解決

1. **リポジトリで「.」キーを押してVS Codeを開く**

2. **ソース管理タブを開く**
   - 左サイドバーの3つ目のアイコン

3. **コンフリクトのあるファイルをクリック**
   - 「!」マークが付いているファイル

4. **VS Codeの解決オプションを使う**
   - 「Accept Current Change」: 現在のブランチの内容を採用
   - 「Accept Incoming Change」: マージするブランチの内容を採用
   - 「Accept Both Changes」: 両方の変更を残す
   - 手動で編集することも可能

## 📚 実践例

### 例1: READMEのタイトル競合

**状況**: 
- mainブランチ: `# ToDo アプリケーション`
- featureブランチ: `# タスク管理アプリケーション`

**コンフリクト表示**:
```markdown
<<<<<<< HEAD
# ToDo アプリケーション
=======
# タスク管理アプリケーション
>>>>>>> feature/rename-title
```

**解決例**:
```markdown
# タスク管理アプリケーション（ToDo アプリ）
```

### 例2: 設定ファイルの競合

**状況**:
- mainブランチ: `"version": "1.0.0"`
- featureブランチ: `"version": "1.1.0"`

**コンフリクト表示**:
```json
{
  "name": "my-app",
<<<<<<< HEAD
  "version": "1.0.0",
=======
  "version": "1.1.0",
>>>>>>> feature/update-version
  "description": "My application"
}
```

**解決例**:
```json
{
  "name": "my-app",
  "version": "1.1.0",
  "description": "My application"
}
```

## 💡 コンフリクトを避けるコツ

### 1. こまめにプル
```bash
# 作業開始前に最新の状態を取得
git pull origin main
```

### 2. 小さな単位でコミット
- 大きな変更は複数の小さなコミットに分ける
- 1つの機能 = 1つのPR

### 3. コミュニケーション
- 同じファイルを編集する場合は事前に相談
- Issueで作業内容を宣言

### 4. ブランチ戦略
```
main
├── feature/user-auth (Aさん)
├── feature/ui-update (Bさん)
└── feature/api-integration (Cさん)
```

## ⚠️ 注意点

### やってはいけないこと
1. **コンフリクトマーカーを残したままコミット**
   ```
   <<<<<<< HEAD  ← これを残さない！
   ```

2. **理解せずに片方を選ぶ**
   - 必ず両方の変更内容を理解してから解決

3. **大きなコンフリクトを一人で解決**
   - 複雑な場合はチームメンバーに相談

### ベストプラクティス
1. **解決後は必ず動作確認**
2. **コミットメッセージに解決内容を記載**
   ```
   Merge branch 'feature/update-ui' into main
   
   Conflicts:
   - styles.css: 両方のスタイル変更を統合
   - index.html: 新しい構造を採用
   ```

## 🆘 困ったときは

### Q: 間違えて解決してしまった
A: コミット前なら、もう一度「Resolve conflicts」からやり直せます

### Q: どちらを選べばいいかわからない
A: 変更を行った人に確認するか、チームで相談しましょう

### Q: コンフリクトが多すぎる
A: 一度PRを閉じて、小さな単位で分割してマージすることを検討

## 📖 練習問題

### 練習1: 簡単なコンフリクト
1. `practice-conflict.md`を作成
2. 2つのブランチで同じ行を異なる内容に編集
3. Web UIで解決

### 練習2: 複数行のコンフリクト
1. リストの項目を両方のブランチで編集
2. 順番も変更してコンフリクトを複雑に
3. 両方の変更を活かして解決

### 練習3: 実践的なコンフリクト
1. HTMLファイルで構造を変更
2. CSSファイルでスタイルを変更
3. 両方が関連する変更でコンフリクト発生
4. 整合性を保ちながら解決